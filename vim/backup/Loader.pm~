package WSB::Software::Loader;

use Moo;
use WSB::Types qw( AbsPath HashRef );
use Config::Any;
use Data::Dumper;


has 'config_file' => (
    is       => 'lazy',
    isa      => AbsPath,
    required => 1,
    coerce   => 1,
);

has 'config' => (
    is       => 'rw',
    isa      => HashRef,
);


sub BUILD {
    my $self = shift;

    my $c = Config::Any->load_files( { files => $self->config_file(), use_ext => 1 } );

    print Dumper($c);
    $self->config( @$c[0]->{'config.yml'} );
    # $self->config( Config::Any->load_files( { files => $self->config_file() } ) );
}

1;
